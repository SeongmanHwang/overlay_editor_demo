<UserControl x:Class="SimpleOverlayEditor.Views.ScoringRuleView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="1000">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 상단 도구바 -->
        <Border Grid.Row="0" 
                Background="#2196F3" 
                Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="정답 및 배점" 
                          FontSize="24" 
                          FontWeight="Bold" 
                          Foreground="White" 
                          VerticalAlignment="Center"/>
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="양식 내보내기" 
                           Command="{Binding ExportTemplateCommand}"
                           Padding="12,5"
                           Background="#FF9800"
                           Foreground="White"
                           FontWeight="Bold"
                           Margin="0,0,10,0"/>
                    <Button Content="파일 불러오기" 
                           Command="{Binding LoadFromFileCommand}"
                           Padding="12,5"
                           Background="#4CAF50"
                           Foreground="White"
                           FontWeight="Bold"
                           Margin="0,0,10,0"/>
                    <Button Content="저장" 
                           Command="{Binding SaveCommand}"
                           Padding="12,5"
                           Background="#2196F3"
                           Foreground="White"
                           FontWeight="Bold"
                           Margin="0,0,10,0"/>
                    <Button Content="홈으로" 
                           Command="{Binding NavigateToHomeCommand}"
                           Padding="20,12"
                           Background="#757575"
                           Foreground="White"
                           FontSize="14"
                           FontWeight="Bold"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- 점수 이름 입력 영역 -->
        <Border Grid.Row="1" 
                Background="#E3F2FD" 
                Padding="10"
                BorderBrush="#BBDEFB"
                BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" 
                          Text="점수" 
                          FontWeight="Bold"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Center"/>
                <TextBlock Grid.Column="1" 
                        Text="{Binding ScoringRule.ScoreNames[0]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="2" 
                        Text="{Binding ScoringRule.ScoreNames[1]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="3" 
                        Text="{Binding ScoringRule.ScoreNames[2]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="4" 
                        Text="{Binding ScoringRule.ScoreNames[3]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="5" 
                        Text="{Binding ScoringRule.ScoreNames[4]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="6" 
                        Text="{Binding ScoringRule.ScoreNames[5]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="7" 
                        Text="{Binding ScoringRule.ScoreNames[6]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="8" 
                        Text="{Binding ScoringRule.ScoreNames[7]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="9" 
                        Text="{Binding ScoringRule.ScoreNames[8]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="10" 
                        Text="{Binding ScoringRule.ScoreNames[9]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="11" 
                        Text="{Binding ScoringRule.ScoreNames[10]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
                <TextBlock Grid.Column="12" 
                        Text="{Binding ScoringRule.ScoreNames[11]}" 
                        Margin="2"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- DataGrid -->
        <DataGrid Grid.Row="2"
                  ItemsSource="{Binding ScoringRule.Questions}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  GridLinesVisibility="All"
                  HeadersVisibility="Column"
                  AlternatingRowBackground="#F5F5F5"
                  Margin="10,0,10,10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="문항" 
                                   Binding="{Binding QuestionNumber}" 
                                   Width="80"
                                   IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="1번" Binding="{Binding Scores[0], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="2번" Binding="{Binding Scores[1], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="3번" Binding="{Binding Scores[2], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="4번" Binding="{Binding Scores[3], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="5번" Binding="{Binding Scores[4], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="6번" Binding="{Binding Scores[5], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="7번" Binding="{Binding Scores[6], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="8번" Binding="{Binding Scores[7], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="9번" Binding="{Binding Scores[8], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="10번" Binding="{Binding Scores[9], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="11번" Binding="{Binding Scores[10], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="12번" Binding="{Binding Scores[11], UpdateSourceTrigger=PropertyChanged}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
