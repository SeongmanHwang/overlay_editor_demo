<UserControl x:Class="SimpleOverlayEditor.Views.HomeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:utils="clr-namespace:SimpleOverlayEditor.Utils"
             xmlns:models="clr-namespace:SimpleOverlayEditor.Models"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800">
    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- í—¤ë” -->
        <Border Grid.Row="0" 
                Background="#1565C0"
                Padding="20,15"
                BorderThickness="0,0,0,2"
                BorderBrush="#0D47A1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0">
                    <TextBlock Text="ìžê¸°ì£¼ë„í•™ìŠµì „í˜• ì„±ì  ì²˜ë¦¬ í”„ë¡œê·¸ëž¨" 
                              FontSize="24" 
                              FontWeight="Bold" 
                              Foreground="White"
                              TextOptions.TextRenderingMode="ClearType"
                              TextOptions.TextFormattingMode="Display"/>
                </StackPanel>
                <StackPanel Grid.Column="1" 
                           Orientation="Horizontal" 
                           VerticalAlignment="Center">
                    <TextBlock Text="íšŒì°¨: " 
                              Foreground="White" 
                              VerticalAlignment="Center"
                              Margin="0,0,5,0"/>
                    <ComboBox x:Name="RoundComboBox"
                             ItemsSource="{Binding AvailableRounds}"
                             SelectedItem="{Binding SelectedRound, Mode=TwoWay}"
                             Width="150"
                             Height="30"
                             VerticalAlignment="Center"
                             Margin="0,0,5,0"/>
                    <Button Content="ì´ë¦„ ë³€ê²½"
                           Command="{Binding RenameRoundCommand}"
                           Width="80"
                           Height="30"
                           VerticalAlignment="Center"
                           Margin="0,0,5,0"
                           Foreground="White"
                           FontSize="12"
                           FontWeight="Bold"
                           Background="#1976D2"
                           BorderThickness="0"
                           Cursor="Hand"
                           Padding="8,6"/>
                    <Button Content="íšŒì°¨ ì¶”ê°€"
                           Command="{Binding CreateRoundCommand}"
                           Width="80"
                           Height="30"
                           VerticalAlignment="Center"
                           Foreground="White"
                           FontSize="12"
                           FontWeight="Bold"
                           Background="#388E3C"
                           BorderThickness="0"
                           Cursor="Hand"
                           Padding="8,6"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <!-- ë²„íŠ¼ ì˜ì—­ì€ Autoë¡œ ê³ ì •, ë¡œì»¬ ë°ì´í„° ì„¹ì…˜ì€ ìŠ¤í¬ë¡¤ë˜ë„ë¡ ë¶„ë¦¬ -->
        <Grid Grid.Row="1"
              HorizontalAlignment="Center"
              Margin="30,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="10"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- ìƒë‹¨: ëª¨ë“œ ë²„íŠ¼ -->
            <Grid Grid.Row="0"
                  VerticalAlignment="Top"
                  HorizontalAlignment="Center"
                  MaxWidth="1200">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="1.2*"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- 1ì—´: í•™êµë³„ ì„¤ì • -->
                <Grid Grid.Column="0" Grid.Row="0" Grid.RowSpan="3">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="5"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="5"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0"
                              Text="í•™êµë³„ ì„¤ì •" 
                              FontSize="15" 
                              FontWeight="Bold" 
                              Foreground="#212121"
                              TextOptions.TextRenderingMode="ClearType"
                              Margin="0,0,0,5"/>
                    <Button Grid.Row="2"
                           Content="í…œí”Œë¦¿ íŽ¸ì§‘" 
                           Command="{Binding NavigateToTemplateEditCommand}"
                           Style="{StaticResource CleanButton}"
                           Background="#6A1B9A"
                           Height="70"
                           HorizontalAlignment="Stretch"/>
                    <Button Grid.Row="4"
                           Content="ë¬¸í•­ ë°°ì  ìž…ë ¥" 
                           Command="{Binding NavigateToScoringRuleCommand}"
                           Style="{StaticResource CleanButton}"
                           Background="#E65100"
                           Height="70"
                           HorizontalAlignment="Stretch"/>
                </Grid>

                <!-- 2ì—´: ë©´ì ‘ ì¤€ë¹„ -->
                <Grid Grid.Column="2" Grid.Row="0" Grid.RowSpan="3">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="5"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0"
                              Text="ë©´ì ‘ ì¤€ë¹„" 
                              FontSize="15" 
                              FontWeight="Bold" 
                              Foreground="#212121"
                              TextOptions.TextRenderingMode="ClearType"
                              Margin="0,0,0,5"/>
                    <Button Grid.Row="2"
                           Content="ìˆ˜í—˜ìƒ ëª…ë ¬ ê´€ë¦¬" 
                           Command="{Binding NavigateToRegistryCommand}"
                           Style="{StaticResource CleanButton}"
                           Background="#2E7D32"
                           MinHeight="150"
                           HorizontalAlignment="Stretch"
                           VerticalAlignment="Stretch"/>
                </Grid>

                <!-- 3ì—´: ë§ˆí‚¹ ë¦¬ë”© (ê°•ì¡°) -->
                <Grid Grid.Column="4" Grid.Row="0" Grid.RowSpan="3">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="5"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0"
                              Text="OMR ìŠ¤ìº”" 
                              FontSize="17" 
                              FontWeight="Bold" 
                              Foreground="#1565C0"
                              TextOptions.TextRenderingMode="ClearType"
                              Margin="0,0,0,5"/>
                    <Button Grid.Row="2"
                           Content="ë§ˆí‚¹ ë¦¬ë”©" 
                           Command="{Binding NavigateToMarkingCommand}"
                           Style="{StaticResource CleanButtonEmphasized}"
                           Background="#1565C0"
                           MinHeight="150"
                           HorizontalAlignment="Stretch"
                           VerticalAlignment="Stretch"/>
                </Grid>

                <!-- 4ì—´: ì„±ì  ì²˜ë¦¬ -->
                <Grid Grid.Column="6" Grid.Row="0" Grid.RowSpan="3">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="5"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="5"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0"
                              Text="ì„±ì  ì²˜ë¦¬" 
                              FontSize="15" 
                              FontWeight="Bold" 
                              Foreground="#212121"
                              TextOptions.TextRenderingMode="ClearType"
                              Margin="0,0,0,5"/>
                    <Button Grid.Row="2"
                           Content="ì±„ì  ë° ì„±ì  ì²˜ë¦¬" 
                           Command="{Binding NavigateToGradingCommand}"
                           Style="{StaticResource CleanButton}"
                           Background="#C62828"
                           Height="70"
                           HorizontalAlignment="Stretch"/>
                    <Button Grid.Row="4"
                           Content="ìˆ˜ê¸° ê²€ì‚°" 
                           Command="{Binding NavigateToManualVerificationCommand}"
                           Style="{StaticResource CleanButton}"
                           Background="#424242"
                           Height="70"
                           HorizontalAlignment="Stretch"/>
                </Grid>

            </Grid>

            <!-- í•˜ë‹¨: ë¡œì»¬ ë°ì´í„° ì„¹ì…˜ (ìŠ¤í¬ë¡¤) -->
            <ScrollViewer Grid.Row="2"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          HorizontalAlignment="Center"
                          MaxWidth="1200">
                <Border Background="White"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        CornerRadius="4"
                        VerticalAlignment="Top"
                        Padding="15"
                        Margin="0,5,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="5"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- ì œëª© ë° ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ -->
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="ë¡œì»¬ ë°ì´í„° ì •ë³´"
                                       FontSize="15"
                                       FontWeight="Bold"
                                       Foreground="#212121"
                                       VerticalAlignment="Center"/>
                            <Button Grid.Column="2"
                                    Content="ìƒˆë¡œê³ ì¹¨"
                                    Command="{Binding RefreshDataUsageCommand}"
                                    Width="80"
                                    Height="30"
                                    FontSize="12"
                                    Background="#1976D2"
                                    Foreground="White"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Padding="8,6"/>
                        </Grid>

                        <!-- ë°ì´í„° ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ -->
                        <ItemsControl Grid.Row="2"
                                      ItemsSource="{Binding DataUsageItems}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Vertical"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate DataType="{x:Type models:DataUsageItem}">
                                    <Border Background="#F9F9F9"
                                            BorderBrush="#E0E0E0"
                                            BorderThickness="1"
                                            CornerRadius="4"
                                            Padding="10,6"
                                            Margin="0,0,0,4">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <TextBlock Grid.Column="0"
                                                       Text="{Binding Name}"
                                                       FontSize="13"
                                                       FontWeight="SemiBold"
                                                       Foreground="#212121"
                                                       VerticalAlignment="Center"
                                                       MinWidth="110"
                                                       Margin="0,0,12,0"/>
                                            
                                            <StackPanel Grid.Column="1"
                                                        VerticalAlignment="Center">
                                                <!-- ë§ˆì§€ë§‰ ë³€ê²½ ë‚ ì§œ/ì‹œê°„ (JSON íŒŒì¼ì¸ ê²½ìš°) -->
                                                <TextBlock FontSize="11"
                                                           Visibility="{Binding Type, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter=JsonFile}">
                                                    <TextBlock.Foreground>
                                                        <MultiBinding Converter="{StaticResource ItemColorConverter}">
                                                            <Binding Path="IsMostRecent"/>
                                                            <Binding Path="Name"/>
                                                        </MultiBinding>
                                                    </TextBlock.Foreground>
                                                    <Run Text="{Binding LastModified, Converter={StaticResource DateTimeDisplayConverter}}"/>
                                                </TextBlock>
                                                
                                                <!-- í´ë”ì¸ ê²½ìš°: ë‚ ì§œ/ì‹œê°„ ë° ìš©ëŸ‰ -->
                                                <StackPanel Visibility="{Binding Type, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter=Folder}">
                                                    <TextBlock FontSize="11">
                                                        <TextBlock.Foreground>
                                                            <MultiBinding Converter="{StaticResource ItemColorConverter}">
                                                                <Binding Path="IsMostRecent"/>
                                                                <Binding Path="Name"/>
                                                            </MultiBinding>
                                                        </TextBlock.Foreground>
                                                        <Run Text="{Binding LastModified, Converter={StaticResource DateTimeDisplayConverter}}"/>
                                                        <Run Text=" ("/>
                                                        <Run Text="{Binding Size, Converter={StaticResource FileSizeConverter}}"/>
                                                        <Run Text=")"/>
                                                    </TextBlock>
                                                </StackPanel>
                                            </StackPanel>
                                            
                                            <!-- í´ë” ì—´ê¸° ë²„íŠ¼ (í´ë”ì¸ ê²½ìš°ë§Œ) -->
                                            <Button Grid.Column="2"
                                                    Command="{Binding DataContext.OpenFolderCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                    CommandParameter="{Binding}"
                                                    Width="28"
                                                    Height="28"
                                                    Padding="0"
                                                    FontSize="16"
                                                    Content="ðŸ“"
                                                    Background="Transparent"
                                                    BorderThickness="1"
                                                    BorderBrush="#E0E0E0"
                                                    Cursor="Hand"
                                                    ToolTip="íƒìƒ‰ê¸°ì—ì„œ ì—´ê¸°"
                                                    Visibility="{Binding Type, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter=Folder}"
                                                    Margin="5,0,0,0"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <!-- ìŠ¤ìº” ì¤‘ ì¸ë””ì¼€ì´í„° -->
                        <StackPanel Grid.Row="2"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Visibility="{Binding IsScanning, Converter={StaticResource BoolToVisibilityConverter}}">
                            <TextBlock Text="ë°ì´í„° ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ì¤‘..."
                                       FontSize="13"
                                       Foreground="#757575"
                                       Margin="0,10"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </ScrollViewer>
        </Grid>
    </Grid>
</UserControl>








